#!/bin/bash

stats=$(grep sim_ticks test/test_$1_$2_$3_$4_$5/stats.txt | tail -2 | head -1)

start_time=$(head -1 test/test_$1_$2_$3_$4_$5/runtime.log)
stop_time=$(tail -1 test/test_$1_$2_$3_$4_$5/runtime.log)
wallclock_time=$(($stop_time-$start_time))

test_status="FAIL"
if test -f "test/test_$1_$2_$3_$4_$5/PASS"; then
    test_status="PASS"
fi

regex='([0-9]+)'
[[ "$stats" =~ $regex ]]

echo "$1,$2,$3,$4,$5,$start_time,$stop_time,$wallclock_time,${BASH_REMATCH[0]},$test_status"

exit 0
